{"componentChunkName":"component---src-templates-post-js","path":"/pages/2020-11-16-Node_1","result":{"data":{"markdownRemark":{"html":"<h1>1. Node.js</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/299e236795f8ac10b1d33b11fc6e48e5/fbf08/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVQoz4VSz0sCURDe/0yCvRhSpBAeDS+FdLCDlHUQ7GRqdLIIukR06BYdQrONQvHQtiRpoivIUkqGRksSuOt+7dv2ba4/aGB482bmffPNvGEADHSFpot5aNNsclKdFmOITdUEHrPpfTAwalv2aC4R5q8QND3JqqQOVMsmfiqxWEyTJMkWG2bMmAGYAXQ6HfR6vd+qukv+/rRYkZjX60WpVLLuo8wNhqqqGu8LhQKcs074fD7UGyJOynsIni4hL94hk87A5XKBZVnkcjkE14JwzDiQvcoaQASDdMoQZoqiGIDhcBjxeBybG1vYScWwfO7BYorF9kUEgZUAIpEI/H4/EvEE5j1zODjeB3/P22ZqMDQpaxzHQayLEAQB/AOPo/wh1s9WcVu9wTWXhXvBjWg0ina7jVAohORu0gZmtExnSH9mVF67L6g0y3hqFVFrVm0xWZat+dEfH/1lUDXnCvGtBq6cRbp4iUrr2fApqjJxzcbWZnjvaNK73IbQ4PEoCfj46k7cz2GbGWp1rGUa0ncSfbVv802Z0HTASQ//AyPyAyEefLhaIakEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/299e236795f8ac10b1d33b11fc6e48e5/fcda8/1.png\"\n        srcset=\"/static/299e236795f8ac10b1d33b11fc6e48e5/12f09/1.png 148w,\n/static/299e236795f8ac10b1d33b11fc6e48e5/e4a3f/1.png 295w,\n/static/299e236795f8ac10b1d33b11fc6e48e5/fcda8/1.png 590w,\n/static/299e236795f8ac10b1d33b11fc6e48e5/efc66/1.png 885w,\n/static/299e236795f8ac10b1d33b11fc6e48e5/fbf08/1.png 962w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Node.js</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">Node.js</code>: open-source, cross-platform <code class=\"language-text\">자바스크립트 런타임</code> 환경</p>\n<ul>\n<li>runtime (런타임)이란 특정 언어로 만든 프로그램들을 실행할 수 있는 환경을 말한다. 웹 브라우저 또한 자바스크립트 런타임의 하나이다. </li>\n<li>Node.js는 크롬 V8 자바스크립트 엔진으로 빌드된 자바스크립트 런타임 환경으로 자바스크립트 프로그램을 브라우저 밖에서도 실행되게 한다.</li>\n<li>이전에도 브라우저 외의 환경에서 자바스크립트를 실행하려는 시도는 있었으나, 속도가 느리다는 문제 때문에 좋은 반응을 보이지 못했다. </li>\n<li>구글 크롬 V8 엔진은 타 자바스크립트 엔진보다 속도가 빠르기 때문에 위의 문제점을 해결하였다.</li>\n</ul>\n</li>\n<li>Node.js 는 <code class=\"language-text\">Single thread</code> 애플리케이션이며, <code class=\"language-text\">event-driven</code>, <code class=\"language-text\">non-blocking</code> 모델을 통해 concurrency (동시성) 을 지원한다.\nevent-driven, non-blocking I/O 모델을 사용하기 때문에 가볍고 효율적이다. </li>\n</ul>\n<h4>Node.js Dependencies</h4>\n<p>  <img src=\"./2.svg\" alt=\"image\"></p>\n<p>  이 외에도 다수의 의존성이 존재한다.</p>\n<h1>2. Node.js 특징</h1>\n<h2>2.1. Event-driven (이벤트 드리븐, 이벤트 기반)</h2>\n<h3>event-driven (이벤트 드리븐, 이벤트 기반)</h3>\n<ul>\n<li>event-driven이란 이벤트가 발생할 때 미리 지정한 작업을 수행하는 방식을 뜻한다. \"특정 이벤트가 발생\"했을 때 \"무엇을 실행할 지\" 등록해야 하는데, 이를 <code class=\"language-text\">event listener (event handler)</code> 에 <code class=\"language-text\">callback</code> 함수를 등록한다고 표현한다.</li>\n<li>이벤트가 발생하면 Node.js 는 <code class=\"language-text\">event listener</code>에 등록한 <code class=\"language-text\">calllback</code>을 실행하는데,  더 이상 수행할 <code class=\"language-text\">callback</code>이 없다면 Node.js는 대기하게 된다.</li>\n</ul>\n<br>\n<p><strong>example</strong><br>\n아래 \"hello world\" 예제는 많은 연결을 동시에 다룰 수 있다.\n각각의 연결에 대해 Node.js 는 callback 을 실행하는데,  더 이상 수행할  callback 이 없다면 Node.js는 대기하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> hostname <span class=\"token operator\">=</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/plain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> hostname<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running at http://</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>hostname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>port<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>event loop (이벤트 루프)</h3>\n<p>Node.js 는 runtime 생성자로 라이브러리대신 <code class=\"language-text\">event loop</code> 를 사용한다.</p>\n<ul>\n<li><strong>event loop</strong> (이벤트 루프)<br>\n<code class=\"language-text\">event loop</code> 는 이벤트 발생 시 호출할 <code class=\"language-text\">callback</code> 함수들을 관리하고, 호출된 <code class=\"language-text\">callback</code> 함수의 실행 순서를 결정한다. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복한다.</li>\n<li><strong>task queue</strong> (태스크 큐, = callback queue, 콜백 큐)<br>\n이벤트 발생 후 호출되어야 할 <code class=\"language-text\">callback</code> 함수들이 기다리는 공간</li>\n<li><strong>background</strong> (백그라운드)<br>\n타이머나 I/O 작업 콜백 또는 <code class=\"language-text\">event listener</code> 가 대기하는 곳</li>\n<li>\n<p><strong>example</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">timeout completed</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>run<span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/95348aa7dfb67010f897a58c04c3a76b/3f3b9/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.35135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVQoz22S23KbMBCGef8H6lU7nRzaOE1jkvgQn7ABYbCpMWeQAO2fRen0qjuzsyNp9e1K+1sAJBF1HBVH1TSNKorCeJ7nZt11nWrbVkkpVVVVZj0Mg8nJsuxfHPctBjGHMBongS8iCAIsFgsIIcAAxHGMp6cnPD8/Y/L4CMdxTO7pdDJ5o+/3e3BBWAzTf4HU9z3pYSCtB8rSK421wKeybikUR4qOIUVBSNk1Jeo1DX1HTVNTVRakZEvcIY0danzayMZ2L/C6PGDlHGHPdpi7DuIuw1lmiFVu4p+uwCYRWO4CLNcBZmsfc/ayrGDxP+koCsfnUSB8/H55x81kji9ff+L7jze8OTtcuhxxyyDJkYEXBkbFBUvfx7fVCxwRwhNnVHUNi39SX5IrsrykQWu4fLDiytPXd7xvBZIkx/9MlDEW1wOqruE3anSdhFIK1jm+6J1zwGa7I3Yk1xR5UZrDuirh+x5c1zUDGK0eJNbVET4DozDCZr3Bar02gxkHaLme0NOpPU6R7u/vcXd3By6CLMsN3PcFPM/nvRhuecb86iJvSpYEIU1To4Qoikxk+cBy9gc9mTzi9vaGJg8PmNovaKXCiaH2UuDm4Y2H4+HXzsG+CFkKGkPXQypppLPdbmHbNmaz2ScwSXMdRme4nk+XJEXVSNai4gvKPD3LC+NVVUOrnou17NJobvyWsixNpyNsLPABW/Dti332QZ4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/95348aa7dfb67010f897a58c04c3a76b/fcda8/3.png\"\n        srcset=\"/static/95348aa7dfb67010f897a58c04c3a76b/12f09/3.png 148w,\n/static/95348aa7dfb67010f897a58c04c3a76b/e4a3f/3.png 295w,\n/static/95348aa7dfb67010f897a58c04c3a76b/fcda8/3.png 590w,\n/static/95348aa7dfb67010f897a58c04c3a76b/3f3b9/3.png 870w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><code class=\"language-text\">call stack</code> 에서 main 까지 실행이 완료되어 <code class=\"language-text\">call stack</code> 이 완전히 비워진다면 <code class=\"language-text\">event loop</code>는 <code class=\"language-text\">task queue</code>에서 함수를 가져와 <code class=\"language-text\">call stack</code>에 넣고 실행한다.</li>\n<li><code class=\"language-text\">event loop</code>는 <code class=\"language-text\">task queue</code>에 <code class=\"language-text\">callback</code> 함수가 들어올 때까지 계속 대기하게 된다.</li>\n<li><code class=\"language-text\">event loop</code>는 <code class=\"language-text\">call stack</code> 이 비어 있을 때만 <code class=\"language-text\">task queue</code>의 함수를 <code class=\"language-text\">call stack</code>으로 가져오기 때문에 만약 <code class=\"language-text\">call stack</code> 에 함수들이 너무 많다면 <code class=\"language-text\">setTimeout</code>이 정확하게 동작하지 않을 수도 있다.</li>\n</ul>\n</li>\n</ul>\n<h2>2.2. Non-blocking (논 블로킹)</h2>\n<p>이벤트 루프에서 실행 시간이 긴 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되도록 하면 오래걸리는 작업을 효율적으로 처리할 수 있다. 이러한 방식을 none-blocking (논 블로킹)이라 한다.</p>\n<p>non blocking이란 이전 작업이 완료될 때까지 멈추지 않고 다음 작업을 수행함을 뜻한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9a3cee698136f7da15a5ad8525ffc1cc/748b0/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXklEQVQoz3VS246CQAzl/3/JdZ/EdV/cuKMLqEQiclMj8YoKM92eLhiNbpPSyfT00PaMRWzL5dKMRiNyHIds26bhcCi+3W6RJmOMRM/zaDKZELCu61Kv15OawWBAcRwLxsJHa202mw2Iyfd9yrKMVqsVXS6XB8L9fi+OHLCz2UzOaZrS4XD4I0yYmf9iMr58Zfdk/nRKQRCggX+xVhiG9NXvG49HQGdxFNH5fH4i3O12wNFHt0sBd3Y6naieTjANzmrq0AEKPnkvGAOkRV3UgKuqIhd77nQoWiyovF5vZI1bNdhAAJCUZSkLf2u16IeXf0+IbkCqlKL3dpvG4/Etf+sQgrBVeZ5rJtMshF6v15pHkjN4OC/OZBp2PB41i6CLopA7YBqcBXUh+Xw+lxjxDhc8DlTE00lrsbAz5JIkkV3DkUPEU8JUMjJjFft3HR+cSRV3oV7l7p0FUzyhnH8BvaWrPJxQoQ8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/9a3cee698136f7da15a5ad8525ffc1cc/fcda8/4.png\"\n        srcset=\"/static/9a3cee698136f7da15a5ad8525ffc1cc/12f09/4.png 148w,\n/static/9a3cee698136f7da15a5ad8525ffc1cc/e4a3f/4.png 295w,\n/static/9a3cee698136f7da15a5ad8525ffc1cc/fcda8/4.png 590w,\n/static/9a3cee698136f7da15a5ad8525ffc1cc/748b0/4.png 868w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Node.js와 non-blocking</p>\n<ul>\n<li>그림에서 보이듯이 <strong>non blocking 방식은 blocking 방식에 비해 짧은 시간에 많은 태스크를 처리할 수 있다</strong>. node.js는 single thread 이기 때문에 동시에 두가지 작업을 처리하는 것이 불가능하므로 non blocking 동작이 유리하다.</li>\n<li>node.js는 <strong>높은 연산을 요구하는 작업</strong> (함수가 계속해서 call stack에 존재)에는 <strong>비효율적</strong>이지만, 다른 컴퓨팅 자원을 이용하는 <strong>I/O 작업</strong> (call stack을 주기적으로 비움)에서 <strong>시간적 이득</strong>을 볼 수 있다. I/O 작업의 예로는 파일 시스템 접근, 네트워크 요청 등을 들 수 있다.</li>\n</ul>\n</li>\n</ul>\n<h2>2.3. Single thread (싱글 스레드)</h2>\n<h3>Thread-based (스레드 기반) 방식과의 비교</h3>\n<ul>\n<li>\n<p><strong>Node.js 장점</strong> </p>\n<ul>\n<li>스레드 기반 네트워킹은 상대적으로 비효율적이고 다루기가 어렵다.</li>\n<li>Node.js 는 <code class=\"language-text\">lock</code> 이 없기 때문에 <code class=\"language-text\">deadlock</code>을 고려하지 않아도 된다.</li>\n<li>\n<p>Node.js 는 확장성 있는 프로그램을 개발하는데 적합하다.</p>\n<ul>\n<li>Node.js 에서 I/O 를 직접 수행하는 함수는 거의 없으므로 프로세스가 <code class=\"language-text\">block</code>되지 않기 때문에 확장성있는 프로그램을 개발하는데 적합하다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p><strong>Node.js multi process</strong></p>\n<ul>\n<li>Node.js 가 단일 스레드라 해서 멀티코어를 활용하지 못하는 것은 아니다.\nNode.js 는 스레드를 늘리는 대신 멀티 프로세싱 방식을 택했다. <a href=\"https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options\"><code class=\"language-text\">child_process.fork()</code></a> API 를 사용하면 <code class=\"language-text\">child process</code>들을 생성할 수 있다.</li>\n<li>같은 인터페이스에 구성된 <a href=\"https://nodejs.org/api/cluster.html\"><code class=\"language-text\">cluster</code></a> 모듈을 사용하면 코어에 <code class=\"language-text\">*load balancing(부하 분산)</code>이 가능하도록 프로세스들 간에 소켓을 공유할 수 있다.</li>\n</ul>\n</li>\n<li>\n<p>*<em>Load Balancing (부하 분산)</em></p>\n<ul>\n<li>여러 서버에 네트워크 트래픽을 분산시키는 프로세스로 하나의 서버가 너무 많은 요청을 받게되는 것을 막는다.\n작업을 균등하게 분산함으로써 애플리케이션 응답성을 향상시킨다.</li>\n</ul>\n</li>\n</ul>\n<h1>겸사겸사 영어공부</h1>\n<h4>단어</h4>\n<table>\n<thead>\n<tr>\n<th>영어</th>\n<th>한글</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>concurrently</td>\n<td>(…와) 동시에, 함께, 겸임하여 ((with))</td>\n</tr>\n<tr>\n<td>further</td>\n<td>더 나아가다</td>\n</tr>\n</tbody>\n</table>\n<h4>기술 용어</h4>\n<table>\n<thead>\n<tr>\n<th>영어</th>\n<th>한글</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>scalable network</td>\n<td>To \"scale a network\" means to \"grow a network\" or \"increase the size of a network\" <br>scalability means the ability to be able to scale or adapt the network for future growth. On another note, limited scalability means that there are limitations placed on how large a network can be grown or increased.</td>\n</tr>\n<tr>\n<td>callback/event firing</td>\n<td>callback/event firing, callback is fired</td>\n</tr>\n</tbody>\n</table>","frontmatter":{"date":"2020-11-16","title":"[Node.js] 1. About Node.js","tags":["Node.js"]},"fields":{"slug":"/pages/2020-11-16-Node_1"}}},"pageContext":{"slug":"/pages/2020-11-16-Node_1"}},"staticQueryHashes":["2827402515","554375791"]}