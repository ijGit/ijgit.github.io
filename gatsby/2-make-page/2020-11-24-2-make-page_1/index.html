<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.26.1"/><link as="script" rel="preload" href="/gitpage-dev/webpack-runtime-507673f43ad786a91f62.js"/><link as="script" rel="preload" href="/gitpage-dev/framework-acb96471af32e2ccbc9d.js"/><link as="script" rel="preload" href="/gitpage-dev/app-4a98b4cd125667493970.js"/><link as="script" rel="preload" href="/gitpage-dev/component---src-templates-post-js-a67b7589d39831a346c3.js"/><link as="fetch" rel="preload" href="/gitpage-dev/page-data/gatsby/2-make-page/2020-11-24-2-make-page_1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/gitpage-dev/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="blog-post-container"><div class="blog-post"><h1>Gatsby로 Gitpage 블로그 만들기 2: 페이지 생성</h1><h2>November 25, 2020</h2><div class="blog-post-content"><h1>Markdown 으로 페이지 생성하기</h1>
<h2>plugin</h2>
<p>Gatsby에서는 Markdown 파일을 생성할 때 아래와 같이 <code>frontmatter</code> 형식으로 페이지와 관련된 데이터를 제공한다.</p>
<pre><code class="language-markdown">---
title: "hello world"
date: "2020-11-25"
---
</code></pre>
<p>해당 데이터를 읽기 위해서는 <code>gatsby-source-filesystem</code>와 <code>gatsby-transformer-remark</code> 플러그인이 필요하다.</p>
<p><code>gatsby-source-filesystem</code> 플러그인을 통해 파일에서 데이터를 가져오고 <code>gatsby-transformer-remark</code> 플러그인을 통해 해당 데이터를 인식가능한 형태로 변환한다.</p>
<h3>install plugin</h3>
<pre><code class="language-shell"># install plugin for read file
$  npm install --save gatsby-source-filesystem

# install plugin for read file
$ npm install --save gatsby-transformer-remark
</code></pre>
<h3>setting plugin</h3>
<pre><code class="language-js">// gatsby-config.js

plugins: [
  {
    resolve: `gatsby-source-filesystem`,
    options: {
      path: `${__dirname}/content/posts`,
      name: `markdown-pages`,
    },
  },
  `gatsby-transformer-remark`,
]
</code></pre>
<p><code>${__dirname}/content/posts</code>: markdown 파일이 위치한 곳</p>
<h2>Page Template</h2>
<p>Markdown 파일 상단은 <code>frontmatter</code> 포맷으로 쓰여진 데이터는 Markdown 파일에 대한 페이지 템플릿을 만드는데 활용된다. (해당 내용은 아래의 "프로그래밍 방식으로 페이지 생성"과 이어진다)</p>
<pre><code class="language-jsx">// src/templates/post.js

import React from "react"
import { graphql } from "gatsby"



export default function Template({
  data, // this prop will be injected by the GraphQL query below.
}) {
  const { markdownRemark } = data // data.markdownRemark holds your post data
  const { frontmatter, html } = markdownRemark
  return (
    &#x3C;div className="blog-post-container">
      &#x3C;div className="blog-post">
        &#x3C;h1>{frontmatter.title}&#x3C;/h1>
        &#x3C;h2>{frontmatter.date}&#x3C;/h2>
        &#x3C;div
          className="blog-post-content"
          dangerouslySetInnerHTML={{ __html: html }}
        />
      &#x3C;/div>
    &#x3C;/div>
  )
}

export const pageQuery = graphql`
  query($slug: String!) {
    markdownRemark(fields: { slug: { eq: $slug } }) {
      html
      frontmatter {
        date(formatString: "MMMM DD, YYYY")
        title
      }
    }
  }
`
</code></pre>
<h1>블로그에 Page 생성하기</h1>
<p>페이지는 다음 방법으로 만들 수 있다.</p>
<ol>
<li>src/pages 디렉토리에 컴포넌트를 생성</li>
<li>프로그래밍 방식으로 페이지 생성</li>
</ol>
<h2>페이지 컴포넌트 생성</h2>
<p>페이지를 만들고 싶다면  <code>src/pages/</code> 디렉토리에 컴포넌트를 생성하면 된다.<br>
gatsby core 는 <code>src/pages/</code>의 컴포넌트를 자동으로 URL이 있는 페이지로 변환한다.</p>
<p>예를 들어 <code>src/pages/index.js</code> 는 <code>/</code> 링크로 접속가능한 페이지로, <code>src/pages/about.js</code>는 <code>/about</code>으로 접속가능한 페이지로 변환된다. </p>
<p>아래는 categories 페이지를 만들기 위한 예제 코드이다.</p>
<pre><code class="language-jsx">// src/pages/about.js

import React from "react"

const CategoriesPage = () => (
  &#x3C;main>
    &#x3C;h1>Categories&#x3C;/h1>
    &#x3C;p>welcome to my gatsby site&#x3C;/p>
  &#x3C;/main>
)

export default CategoriesPage
</code></pre>
<h2>프로그래밍 방식으로 Page 생성</h2>
<p>블로그 포스트를 작성할 때 마다 컴포넌트를 작성하라고 하면 욕이 나오지 않을까 싶다.<br>
다행히도 <code>createPage</code>를 사용하여 프로그래밍 방식으로 페이지를 만들 수 있다. <br></p>
<h2>for create page</h2>
<h3>slug (path)</h3>
<p><code>slug (슬러그)</code>는 <code>www.google.com/image</code> 에서 <code>image</code> 와 같이 고유한 웹 페이지 주소를 식별하는 역할을 한다.<br>
<br>'path (경로)' 라고도 하나, gatsby 에서는 <code>slug</code>라는 용어를 사용한다.</p>
<p>페이지를 자동으로 만드려면 해당 페이지에 접속하기 위한 웹 페이지 주소, 즉 슬러그도 생성해야 한다.
<code>gatsby-source-filesystem</code> 플러그인에 슬러그를 만드는 기능이 있다. </p>
<pre><code class="language-shell">#install gatsby-source-filesystem
$ npm install --save gatsby-source-filesystem
</code></pre>
<h3>gatsby-node.js에서 슬러그 생성</h3>
<p><code>gatsby-node.js</code> 파일은 Gatsby의 Node.js API를 구현하는 파일이다. 빌드 프로세스에 영향을 미치는 기본 설정을 사용자 정의하고 확장한다.</p>
<p>새로운 슬러그는 <code>MarkdownRemark</code> 노드에 추가하여 데이터를 쿼리할 수 있도록 한다. <code>createNodeField</code> 기능을 이용하면 다른 플러그인에서 만든 노드에 필드를 추가할 수 있다.</p>
<p>프로젝트 루트 디렉토리에 <code>gatsby-node.js</code> 파일이 없다면 생성한 뒤에 아래 내용을 작성한다.</p>
<pre><code class="language-js">//gatsby-node.js

const { createFilePath } = require(`gatsby-source-filesystem`)

exports.onCreateNode = ({ node, getNode, actions }) => {
  const { createNodeField } = actions
  if (node.internal.type === `MarkdownRemark`) {
    const slug = createFilePath({ node, getNode, basePath: `pages` })
    createNodeField({
      node,
      name: `slug`,
      value: slug,
    })
  }
}
</code></pre>
<h3>createPages</h3>
<p>createPages 은 프로그래밍 방식으로 페이지를 만드는 핵심 기능이다.</p>
<pre><code class="language-js">// gatsby-node.js

exports.createPages = async function ({ actions, graphql }) {
  const { data } = await graphql(`
    query {
      allMarkdownRemark {
        edges {
          node {
            fields {
              slug
            }
          }
        }
      }
    }
  `)
  data.allMarkdownRemark.edges.forEach(edge => {
    const slug = edge.node.fields.slug
    actions.createPage({
      path: slug,
      component: require.resolve(`./src/templates/post.js`),
      context: { slug: slug },
    })
  })
}
</code></pre>
<p>만들려는 각 페이지의 경로와 해당 페이지를 렌더링 하기위한 템플릿을 지정해주어야 한다.
위의 예제는 모든 슬러그에 대해 페이지를 생성하고 있으며, <br>
템플릿 파일은 <code>./src/templates/post.js</code>이다.</p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/gatsby/2-make-page/2020-11-24-2-make-page_1/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-92b076c0eec7a7a7a6c5.js"],"app":["/app-4a98b4cd125667493970.js"],"component---src-pages-index-js":["/component---src-pages-index-js-1d2671ceb03571bd7d27.js"],"component---src-templates-post-js":["/component---src-templates-post-js-a67b7589d39831a346c3.js"]};/*]]>*/</script><script src="/gitpage-dev/polyfill-92b076c0eec7a7a7a6c5.js" nomodule=""></script><script src="/gitpage-dev/component---src-templates-post-js-a67b7589d39831a346c3.js" async=""></script><script src="/gitpage-dev/app-4a98b4cd125667493970.js" async=""></script><script src="/gitpage-dev/framework-acb96471af32e2ccbc9d.js" async=""></script><script src="/gitpage-dev/webpack-runtime-507673f43ad786a91f62.js" async=""></script></body></html>